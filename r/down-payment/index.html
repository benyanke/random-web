<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Down Payment Calc</title>
<style>
</style>
    </head>
    <body>

	House price:<br />
	<input id="houseprice" value="150"/>,000

	<br /><br/>
	Down payment: <span id="downpayment" /></span>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
  function calcDownPayment() {
    var fullPrice = parseInt($('#houseprice').val());
    fullPrice = fullPrice*1000;

    finalPrice = parseInt(
      3000 + // Closing costs
      ( 2000 + (fullPrice * 0.001)) + // Prepaid taxes
      (fullPrice * 0.020) // Down payment
    );

    if(finalPrice == 'NaN') {
      finalPrice = "";
    }

    $('#downpayment').html("$" + numberWithCommas(finalPrice));

  }


function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

$(document).ready(function() {

  calcDownPayment();

  
  $('#houseprice').keyup(function() {
    calcDownPayment();
  });

  $('html').keyup(function() {
    calcDownPayment();
  });


});
</script>
    </body>
</html>
